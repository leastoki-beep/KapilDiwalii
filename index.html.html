<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diwali Wishes — Interactive Card</title>
  <!-- Replace or remove the Google Font if you prefer local fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600;800&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#ffd166; /* warm gold */
      --accent-2:#ff6b6b; /* soft pink */
      --bg:#03030a;
    }
    html,body{height:100%;margin:0;font-family:Montserrat,system-ui,Arial,sans-serif;background:var(--bg);color:#fff}
    /* starfield layer */
    .stars{position:fixed;inset:0;pointer-events:none;background:radial-gradient(ellipse at center, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.02) 20%, transparent 60%), transparent}
    .container{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;box-sizing:border-box;position:relative;z-index:2}
    h1{font-family:'Playfair Display',serif;margin:0 0 12px;font-size:clamp(20px,4vw,40px);text-align:center}
    p.lead{margin:0 0 18px;text-align:center;opacity:0.9}
    .card{max-width:900px;width:100%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:18px;padding:22px;box-shadow:0 6px 40px rgba(0,0,0,0.6);backdrop-filter: blur(6px)}
    .center{display:flex;flex-direction:column;align-items:center;gap:14px}
    .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;padding:12px 18px;border-radius:999px;font-weight:700;cursor:pointer;color:#111;font-size:16px;box-shadow:0 6px 18px rgba(255,133,100,0.12)}
    .btn:active{transform:translateY(1px)}
    /* message area */
    .message{margin-top:20px;min-height:120px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px;border-radius:12px}
    .text-line{font-size:clamp(16px,2.4vw,22px);text-align:center;opacity:0;transform:translateY(10px);transition:opacity .8s ease, transform .8s ease}
    .text-line.show{opacity:1;transform:none}
    .hint{font-size:13px;opacity:0.7;margin-top:10px}
    /* responsive */
    @media(min-width:900px){
      .card{display:flex;gap:20px;align-items:center;padding:34px}
      .left{flex:1}
      .right{flex:1}
    }
    /* subtle twinkling stars using pseudo-elements */
    .star-layer::before,.star-layer::after{content:'';position:fixed;inset:0;background-image:radial-gradient(circle at 10% 20%, rgba(255,255,255,0.7) 0px, rgba(255,255,255,0.0) 2px),radial-gradient(circle at 80% 70%, rgba(255,255,255,0.5) 0px, rgba(255,255,255,0.0) 2px);opacity:.14;pointer-events:none}
    /* small credit */
    .credit{position:fixed;left:12px;bottom:12px;font-size:12px;opacity:0.6}
    /* make canvas on full screen (for fireworks) */\    
    canvas#fw{position:fixed;inset:0;z-index:1;pointer-events:none}
  </style>
</head>
<body>
  <!-- Star layers for subtle effect -->
  <div class="star-layer stars"></div>

  <!-- Fullscreen canvas for fireworks -->
  <canvas id="fw"></canvas>

  <div class="container">
    <div class="card" role="main" aria-labelledby="title">
      <div class="left center">
        <h1 id="title">Happy New Year / शुभ नववर्ष</h1>
        <p class="lead">Click the light to launch the fireworks — then your message will appear ✨</p>
        <button id="launchBtn" class="btn">Launch the light / शुभारंभ</button>
        <div class="hint">(Works on desktop & mobile — tap the button)</div>
      </div>

      <div class="right center">
        <div class="message" id="messageBox" aria-live="polite">
          <!-- Default temporary bilingual message (editable) -->
          <div id="line1" class="text-line">Happy New Year, my love — may our days be filled with light and laughter.</div>
          <div id="line2" class="text-line" style="font-family: 'Noto Sans Devanagari', system-ui;">नया साल मुबारक हो, मेरे प्रिय — तुम्हारे साथ हर दिन रोशनी और खुशी से भरा रहे।</div>
        </div>
      </div>
    </div>
    <div class="credit">Made with love — edit message in the HTML to personalize</div>
  </div>

  <!-- Background music (replace 'music.mp3' with your file or an online URL). For privacy, the audio will not autoplay on many mobiles; it will start after a user interaction (the button click). -->
  <audio id="bgAudio" loop preload="auto">
    <!-- Put your own audio URL or path here. Example: 'https://example.com/diwali-instrumental.mp3' -->
    <source src="music.mp3" type="audio/mpeg">
    Your browser does not support audio.
  </audio>

  <script>
    /* ========== User-editable variables ========== 
       You can edit these texts directly in the HTML or use JS to change them dynamically.
       - line1 (English)
       - line2 (Hindi)
    =============================================*/

    // Simple helper: select elements
    const launchBtn = document.getElementById('launchBtn');
    const line1 = document.getElementById('line1');
    const line2 = document.getElementById('line2');
    const messageBox = document.getElementById('messageBox');
    const audio = document.getElementById('bgAudio');

    // Canvas setup for fireworks
    const canvas = document.getElementById('fw');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = window.innerWidth;
    let H = canvas.height = window.innerHeight;

    window.addEventListener('resize', ()=>{W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight});

    // Basic fireworks particle system (small, performant)
    const fireworks = [];
    const particles = [];

    function rand(min,max){return Math.random()*(max-min)+min}

    class Firework{
      constructor(x,y,tx,ty){
        this.x=x;this.y=y;this.tx=tx;this.ty=ty;this.vx=(tx-x)/20;this.vy=(ty-y)/20;this.alpha=1;this.color=`hsl(${rand(0,360)},90%,60%)`;
      }
      update(){
        this.x+=this.vx;this.y+=this.vy;this.vy+=0.04; // gravity
        if(Math.hypot(this.x-this.tx,this.y-this.ty)<6){
          this.explode();
          return false;
        }
        return true;
      }
      draw(){
        ctx.save();ctx.globalAlpha=this.alpha;ctx.beginPath();ctx.fillStyle=this.color;ctx.arc(this.x,this.y,2.5,0,Math.PI*2);ctx.fill();ctx.restore();
      }
      explode(){
        const count = Math.floor(rand(18,32));
        for(let i=0;i<count;i++){
          particles.push(new Particle(this.x,this.y,this.color));
        }
      }
    }
    class Particle{
      constructor(x,y,color){
        this.x=x;this.y=y;this.vx=rand(-4,4);this.vy=rand(-6,2);this.life=rand(40,90);this.ttl=this.life;this.color=color;this.size=rand(1,3);
      }
      update(){
        this.vy+=0.06;this.vx*=0.995;this.vy*=0.995;this.x+=this.vx;this.y+=this.vy;this.ttl--;return this.ttl>0;
      }
      draw(){
        ctx.save();ctx.globalCompositeOperation='lighter';ctx.globalAlpha=Math.max(this.ttl/this.life,0);
        ctx.beginPath();ctx.fillStyle=this.color;ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.fill();ctx.restore();
      }
    }

    function loop(){
      ctx.clearRect(0,0,W,H);
      // subtle trail background
      ctx.fillStyle='rgba(1,1,7,0.12)';ctx.fillRect(0,0,W,H);
      for(let i=fireworks.length-1;i>=0;i--){
        const fw = fireworks[i];
        if(!fw.update()) fireworks.splice(i,1);
        else fw.draw();
      }
      for(let i=particles.length-1;i>=0;i--){
        const p=particles[i];
        if(!p.update()) particles.splice(i,1);
        else p.draw();
      }
      requestAnimationFrame(loop);
    }
    loop();

    // helper to launch a firework to a random point in upper area
    function launchRandom(){
      const startX = rand(W*0.2,W*0.8);
      const startY = H+10;
      const targetX = rand(W*0.1,W*0.9);
      const targetY = rand(H*0.12,H*0.5);
      fireworks.push(new Firework(startX,startY,targetX,targetY));
    }

    // sequence: when user clicks, play audio (if available), launch multiple fireworks, then reveal message
    let started=false;
    launchBtn.addEventListener('click', async ()=>{
      if(started) return; started=true;
      // try to play audio (most browsers require an interaction)
      try{audio.currentTime=0; await audio.play();}catch(e){/* ignore if blocked */}

      // animate button feedback
      launchBtn.textContent='Launching...';
      launchBtn.disabled=true;

      // schedule multiple fireworks
      const rounds = 8;
      let r=0;
      const iv = setInterval(()=>{
        // launch 2-4 fireworks per round
        const count = Math.floor(rand(2,4));
        for(let i=0;i<count;i++) launchRandom();
        r++; if(r>=rounds){clearInterval(iv);revealMessage();launchBtn.textContent='Launched';}
      }, 420);
    });

    // reveal message with fade-in lines, in sequence
    function revealMessage(){
      const lines = [line1,line2];
      lines.forEach((el,idx)=>{
        setTimeout(()=>el.classList.add('show'), idx*700);
      });
      // small additional sparkle after message
      setTimeout(()=>{for(let i=0;i<4;i++){setTimeout(launchRandom, i*260)}},1500);
    }

    // Accessibility: if user prefers reduced motion, skip fireworks
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(prefersReduced){
      // hide canvas and show message immediately
      canvas.style.display='none';
      launchBtn.addEventListener('click', ()=>{revealMessage();try{audio.play()}catch(e){}});
    }

    /* ========== Instructions for publishing (visible when editing the file):
       1) Save this file as `index.html`.
       2) Replace the 'music.mp3' reference with your own audio file URL, or upload an mp3 to Netlify (or use a public URL).
       3) To publish quickly: create a free account on Netlify, drag & drop the folder containing index.html to get a link. Or use GitHub Pages.
       4) To change the default messages: edit the innerText of #line1 and #line2.
    =============================================*/
  </script>
</body>
</html>
